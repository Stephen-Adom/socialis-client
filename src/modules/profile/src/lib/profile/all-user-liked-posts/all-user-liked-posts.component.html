<div
  class="max-h-[500px] overflow-y-auto pb-8 pr-4"
  *ngIf="(allPosts$ | async)?.length"
>
  <ng-container *ngFor="let post of allPosts$ | async; let i = index">
    <ng-container *ngIf="getPostUidTag(post.uid)">
      <ng-container
        *ngTemplateOutlet="postTemplate; context: { $implicit: post }"
      ></ng-container>
    </ng-container>

    <ng-container *ngIf="getCommentUidTag(post.uid)">
      <ng-container
        *ngTemplateOutlet="commentTemplate; context: { $implicit: post }"
      ></ng-container>
    </ng-container>

    <ng-container *ngIf="getReplyUidTag(post.uid)">
      <ng-container
        *ngTemplateOutlet="replyTemplate; context: { $implicit: post }"
      ></ng-container>
    </ng-container>
  </ng-container>
</div>

<ng-template #postTemplate let-post>
  <lib-post-card [post]="post" />
</ng-template>
<ng-template #commentTemplate let-post>
  <lib-comment-card [comment]="post" />
</ng-template>
<ng-template #replyTemplate let-post>
  <lib-reply-card [reply]="post" />
</ng-template>
