<div
  id="edit-profile-info-modal"
  class="hs-overlay hidden w-full h-full fixed top-0 left-0 z-[1200] overflow-x-hidden overflow-y-auto"
>
  <div
    class="hs-overlay-open:mt-7 hs-overlay-open:opacity-100 hs-overlay-open:duration-500 mt-0 opacity-0 ease-out transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto min-h-[calc(100%-3.5rem)] flex items-center"
  >
    <div
      class="w-full flex flex-col bg-white border shadow-sm rounded-xl dark:bg-main-dark dark:border-gray-700 dark:shadow-slate-700/[.7]"
    >
      <div
        class="flex justify-between items-center py-3 px-4 border-b dark:border-gray-700"
      >
        <h3 class="font-bold text-gray-800 dark:text-white">
          Edit Profile Info
        </h3>
        <button
          type="button"
          class="hs-dropdown-toggle inline-flex flex-shrink-0 justify-center items-center h-8 w-8 rounded-md text-gray-500 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:ring-offset-white transition-all text-sm dark:focus:ring-gray-700 dark:focus:ring-offset-gray-800"
          data-hs-overlay="#edit-profile-info-modal"
        >
          <span class="sr-only">Close</span>
          <svg
            class="w-3.5 h-3.5"
            width="8"
            height="8"
            viewBox="0 0 8 8"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z"
              fill="currentColor"
            />
          </svg>
        </button>
      </div>
      <div class="p-4 overflow-y-auto">
        <form
          [formGroup]="Form"
          novalidate
          class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 w-full mx-auto gap-4"
        >
          <div class="form-group">
            <label for="firstname" class="text-sm mb-1 dark:text-dark-text"
              >Firstname</label
            >
            <input
              [class.is-invalid]="
                Form.get('firstname')?.invalid && Form.get('firstname')?.touched
              "
              type="text"
              class="form-control dark:bg-main-dark dark:border-gray-700 dark:text-dark-text"
              id="firstname"
              placeholder="Enter first name"
              formControlName="firstname"
            />

            <feature-error-message
              [control]="'firstname'"
              [Form]="Form"
              [errorMessage]="'Firstname is required'"
            />
          </div>

          <div class="form-group">
            <label for="lastname" class="text-sm mb-1 dark:text-dark-text"
              >Lastname</label
            >
            <input
              [class.is-invalid]="
                Form.get('lastname')?.invalid && Form.get('lastname')?.touched
              "
              type="text"
              class="form-control dark:bg-main-dark dark:border-gray-700 dark:text-dark-text"
              id="lastname"
              placeholder="Enter last name"
              formControlName="lastname"
            />
            <feature-error-message
              [control]="'lastname'"
              [Form]="Form"
              [errorMessage]="'Lastname is required'"
            />
          </div>

          <div class="form-group relative">
            <label for="username" class="text-sm mb-1 dark:text-dark-text"
              >Username</label
            >
            <div
              *ngIf="validatingUsername"
              class="absolute top-[31%] right-2 animate-spin inline-block w-4 h-4 border-[3px] border-current border-t-transparent text-blue-600 rounded-full"
              role="status"
              aria-label="loading"
            >
              <span class="sr-only">Loading...</span>
            </div>

            <input
              [class.is-invalid]="
                Form.get('username')?.invalid && Form.get('username')?.touched
              "
              type="text"
              class="form-control dark:bg-main-dark dark:border-gray-700 dark:text-dark-text"
              id="username"
              placeholder="Enter username"
              formControlName="username"
            />
            <feature-error-message
              [control]="'username'"
              [Form]="Form"
              [errorMessage]="getUsernameErrorMessage(Form.get('username'))"
            />
          </div>

          <div class="form-group relative">
            <label for="phone" class="text-sm mb-1 dark:text-dark-text"
              >Phonenumber</label
            >

            <div
              *ngIf="validatingPhonenumber"
              class="absolute top-[55%] right-2 z-[1] animate-spin inline-block w-4 h-4 border-[3px] border-current border-t-transparent text-blue-600 rounded-full"
              role="status"
              aria-label="loading"
            >
              <span class="sr-only">Loading...</span>
            </div>

            <ngx-intl-tel-input
              [cssClass]="
                'block w-full form-control dark:bg-main-dark dark:border-gray-700 dark:text-dark-text'
              "
              [separateDialCode]="separateDialCode"
              [preferredCountries]="preferredCountries"
              [enableAutoCountrySelect]="false"
              [enablePlaceholder]="true"
              [searchCountryFlag]="true"
              [searchCountryField]="[
                SearchCountryField.Iso2,
                SearchCountryField.Name
              ]"
              [selectFirstCountry]="false"
              [selectedCountryISO]="CountryISO.Ghana"
              [maxLength]="15"
              [phoneValidation]="true"
              name="phone"
              formControlName="phonenumber"
            ></ngx-intl-tel-input>

            <feature-error-message
              [control]="'phonenumber'"
              [Form]="Form"
              [errorMessage]="getPhoneErrorMessage(Form.get('phonenumber'))"
            />
          </div>

          <div class="form-group col-auto sm:col-auto md:col-span-2">
            <label for="address" class="text-sm mb-1 dark:text-dark-text"
              >Address</label
            >
            <input
              type="text"
              class="form-control dark:bg-main-dark dark:border-gray-700 dark:text-dark-text"
              id="address"
              placeholder="Enter address"
              formControlName="address"
            />
          </div>

          <div class="form-group col-auto sm:col-auto md:col-span-2">
            <label for="bio" class="text-sm mb-1 dark:text-dark-text"
              >Bio</label
            >
            <textarea
              formControlName="bio"
              id="bio"
              rows="3"
              class="form-control dark:bg-main-dark dark:border-gray-700 dark:text-dark-text"
            ></textarea>
          </div>
        </form>
      </div>
      <div
        class="flex justify-end items-center gap-x-2 py-3 px-4 border-t dark:border-gray-700"
      >
        <button
          #closeButton
          type="button"
          class="hs-dropdown-toggle py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-white dark:focus:ring-offset-gray-800"
          data-hs-overlay="#edit-profile-info-modal"
        >
          Close
        </button>
        <button
          [disabled]="submittingForm"
          type="submit"
          (click)="submitInfo()"
          class="py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold disabled:bg-blue-300 bg-blue-500 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800"
        >
          {{ submittingForm ? 'Udating...' : 'Update Info' }}

          <ng-container *ngIf="submittingForm; else elseTemplate">
            <div
              *ngIf="submittingForm"
              class="animate-spin inline-block w-5 h-5 border-[3px] border-current border-t-transparent text-blue-600 rounded-full"
              role="status"
              aria-label="loading"
            >
              <span class="sr-only">Loading...</span>
            </div>
          </ng-container>
          <ng-template #elseTemplate>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-5 h-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"
              />
            </svg>
          </ng-template>
        </button>
      </div>
    </div>
  </div>
</div>
